
Showing logs for build [32mtrietlu-flask-jx-sample-pr-22-s-6wrsd-5[0m stage [32mfrom-build-pack[0m and container [32mstep-credential-initializer-4ltx8[0m
{"level":"warn","ts":1583110729.6953979,"logger":"fallback-logger","caller":"logging/config.go:69","msg":"Fetch GitHub commit ID from kodata failed: \"ref: refs/heads/0.8.0-**-support-backwards-incompats\" is not a valid GitHub commit ID"}
{"level":"info","ts":1583110729.6961772,"logger":"fallback-logger","caller":"creds-init/main.go:40","msg":"Credentials initialized."}

Showing logs for build [32mtrietlu-flask-jx-sample-pr-22-s-6wrsd-5[0m stage [32mfrom-build-pack[0m and container [32mstep-working-dir-initializer-q8cn7[0m
{"level":"warn","ts":1583110730.7556264,"logger":"fallback-logger","caller":"logging/config.go:69","msg":"Fetch GitHub commit ID from kodata failed: open /var/run/ko/HEAD: no such file or directory"}
{"level":"info","ts":1583110730.7568653,"logger":"fallback-logger","caller":"bash/main.go:64","msg":"Successfully executed command \"sh -c mkdir -p /workspace/source\"; output "}

Showing logs for build [32mtrietlu-flask-jx-sample-pr-22-s-6wrsd-5[0m stage [32mfrom-build-pack[0m and container [32mstep-place-tools[0m

Showing logs for build [32mtrietlu-flask-jx-sample-pr-22-s-6wrsd-5[0m stage [32mfrom-build-pack[0m and container [32mstep-git-source-trietlu-flask-jx-sample-pr-22-s-6wrsd-92rvm[0m
{"level":"warn","ts":1583110740.823833,"logger":"fallback-logger","caller":"logging/config.go:69","msg":"Fetch GitHub commit ID from kodata failed: \"ref: refs/heads/0.8.0-**-support-backwards-incompats\" is not a valid GitHub commit ID"}
{"level":"info","ts":1583110741.0950952,"logger":"fallback-logger","caller":"git/git.go:103","msg":"Successfully cloned https://github.com/*******/flask-**-sample.git @ master in path /workspace/source"}

Showing logs for build [32mtrietlu-flask-jx-sample-pr-22-s-6wrsd-5[0m stage [32mfrom-build-pack[0m and container [32mstep-git-merge[0m
Using SHAs from PULL_REFS=master:2a929b3618920b0b0ead79f71dc8aa3e56708281,22:398b4b777a324e471fcb31f5bed87c62c4a3cb2f
DEBUG: LC_ALL=C JX_LOG_LEVEL=error git fetch origin --unshallow 398b4b777a324e471fcb31f5bed87c62c4a3cb2f: 2a929b3618920b0b0ead79f71dc8aa3e56708281:
DEBUG: ran git fetch --unshallow origin 398b4b777a324e471fcb31f5bed87c62c4a3cb2f: 2a929b3618920b0b0ead79f71dc8aa3e56708281: in 
DEBUG: LC_ALL=C JX_LOG_LEVEL=error git branch
DEBUG: LC_ALL=C JX_LOG_LEVEL=error git checkout master
DEBUG: ran git checkout master in 
DEBUG: JX_LOG_LEVEL=error LC_ALL=C git reset --hard 2a929b3618920b0b0ead79f71dc8aa3e56708281
DEBUG: ran git reset --hard 2a929b3618920b0b0ead79f71dc8aa3e56708281 in 
DEBUG: LC_ALL=C JX_LOG_LEVEL=error git clean -fd .
DEBUG: ran clean --force -d . in 
DEBUG: LC_ALL=C JX_LOG_LEVEL=error git merge 398b4b777a324e471fcb31f5bed87c62c4a3cb2f
DEBUG: ran git merge 398b4b777a324e471fcb31f5bed87c62c4a3cb2f in 
DEBUG: LC_ALL=C JX_LOG_LEVEL=error git log --format=%H%x1f%an%x1f%ae%x1f%cn%x1f%ce%x1f%s%n%b%x1e 2a929b3618920b0b0ead79f71dc8aa3e56708281..HEAD
Merged SHA 398b4b777a324e471fcb31f5bed87c62c4a3cb2f with commit message 'unit testing correction' into base branch master
Merged SHA 65e0cfa7be95a2612836f54ab1c91e2832f03f57 with commit message 'unit testing correction' into base branch master
Merged SHA c1860b7c2583930b7b73225e3aff48e29427eda6 with commit message 'unit testing correction' into base branch master
Merged SHA 0d5f24bf2fe2c1dc097f8e63260894606107f39f with commit message 'unit testing correction' into base branch master

Showing logs for build [32mtrietlu-flask-jx-sample-pr-22-s-6wrsd-5[0m stage [32mfrom-build-pack[0m and container [32mstep-build-unit-test[0m
.
----------------------------------------------------------------------
Ran 1 test in 0.000s

OK

Showing logs for build [32mtrietlu-flask-jx-sample-pr-22-s-6wrsd-5[0m stage [32mfrom-build-pack[0m and container [32mstep-build-code-scan[0m
WARNING: Running pip install with root privileges is generally not a good idea. Try `pip3 install --user` instead.
Collecting python-taint
  Downloading https://files.pythonhosted.org/packages/5c/79/5b70d3299cb7dea63e2b015651c5c7507d723911ff2837e104ebd7079491/python_taint-0.42-py3-none-any.whl (52kB)
Installing collected packages: python-taint
Successfully installed python-taint-0.42
No vulnerabilities found.

Showing logs for build [32mtrietlu-flask-jx-sample-pr-22-s-6wrsd-5[0m stage [32mfrom-build-pack[0m and container [32mstep-build-python-unittest[0m

Showing logs for build [32mtrietlu-flask-jx-sample-pr-22-s-6wrsd-5[0m stage [32mfrom-build-pack[0m and container [32mstep-build-container-build[0m
[36mINFO[0m[0000] Downloading base image python:onbuild        
[36mINFO[0m[0000] Error while retrieving image from cache: getting file info: stat /workspace/sha256:43780a8431c53f4afd734ad795e03127c0c607337a60639c5903a51a03535c22: no such file or directory 
[36mINFO[0m[0000] Downloading base image python:onbuild        
[36mINFO[0m[0000] Executing 3 build triggers                   
[36mINFO[0m[0000] Using files from context: [/workspace/source/requirements.txt] 
[36mINFO[0m[0000] Checking for cached layer 251647719696.dkr.ecr.us-east-2.amazonaws.com/todo/cache:d59b97174bce710b82c453d1c61c69fabd876428b1d9b57a93fe29aaa79d6fc7... 
[36mINFO[0m[0000] No cached layer found for cmd RUN pip install --no-cache-dir -r requirements.txt 
[36mINFO[0m[0000] Unpacking rootfs as cmd RUN pip install --no-cache-dir -r requirements.txt requires it. 
[36mINFO[0m[0013] Taking snapshot of full filesystem...        
[36mINFO[0m[0017] Using files from context: [/workspace/source/requirements.txt] 
[36mINFO[0m[0017] COPY requirements.txt /usr/src/app/          
[36mINFO[0m[0017] Taking snapshot of files...                  
[36mINFO[0m[0017] RUN pip install --no-cache-dir -r requirements.txt 
[36mINFO[0m[0017] cmd: /bin/sh                                 
[36mINFO[0m[0017] args: [-c pip install --no-cache-dir -r requirements.txt] 
Collecting Flask (from -r requirements.txt (line 2))
  Downloading https://files.pythonhosted.org/packages/9b/93/628509b8d5dc749656a9641f4caf13540e2cdec85276964ff8f43bbb1d3b/Flask-1.1.1-py2.py3-none-any.whl (94kB)
Collecting Jinja2>=2.10.1 (from Flask->-r requirements.txt (line 2))
  Downloading https://files.pythonhosted.org/packages/27/24/4f35961e5c669e96f6559760042a55b9bcfcdb82b9bdb3c8753dbe042e35/Jinja2-2.11.1-py2.py3-none-any.whl (126kB)
Collecting itsdangerous>=0.24 (from Flask->-r requirements.txt (line 2))
  Downloading https://files.pythonhosted.org/packages/76/ae/44b03b253d6fade317f32c24d100b3b35c2239807046a4c953c7b89fa49e/itsdangerous-1.1.0-py2.py3-none-any.whl
Collecting Werkzeug>=0.15 (from Flask->-r requirements.txt (line 2))
  Downloading https://files.pythonhosted.org/packages/ba/a5/d6f8a6e71f15364d35678a4ec8a0186f980b3bd2545f40ad51dd26a87fb1/Werkzeug-1.0.0-py2.py3-none-any.whl (298kB)
Collecting click>=5.1 (from Flask->-r requirements.txt (line 2))
  Downloading https://files.pythonhosted.org/packages/fa/37/45185cb5abbc30d7257104c434fe0b07e5a195a6847506c074527aa599ec/Click-7.0-py2.py3-none-any.whl (81kB)
Collecting MarkupSafe>=0.23 (from Jinja2>=2.10.1->Flask->-r requirements.txt (line 2))
  Downloading https://files.pythonhosted.org/packages/b2/5f/23e0023be6bb885d00ffbefad2942bc51a620328ee910f64abe5a8d18dd1/MarkupSafe-1.1.1-cp36-cp36m-manylinux1_x86_64.whl
Installing collected packages: MarkupSafe, Jinja2, itsdangerous, Werkzeug, click, Flask
Successfully installed Flask-1.1.1 Jinja2-2.11.1 MarkupSafe-1.1.1 Werkzeug-1.0.0 click-7.0 itsdangerous-1.1.0
You are using pip version 10.0.1, however version 20.0.2 is available.
You should consider upgrading via the 'pip install --upgrade pip' command.
[36mINFO[0m[0019] Taking snapshot of full filesystem...        
[36mINFO[0m[0022] Pushing layer 251647719696.dkr.ecr.us-east-2.amazonaws.com/todo/cache:d59b97174bce710b82c453d1c61c69fabd876428b1d9b57a93fe29aaa79d6fc7 to cache now 
[36mINFO[0m[0022] Using files from context: [/workspace/source] 
[36mINFO[0m[0022] COPY . /usr/src/app                          
[36mINFO[0m[0022] Taking snapshot of files...                  
[36mINFO[0m[0022] Using files from context: [/workspace/source/requirements.txt] 
[36mINFO[0m[0022] COPY requirements.txt .                      
[36mINFO[0m[0022] Taking snapshot of files...                  
[36mINFO[0m[0022] Using files from context: [/workspace/source/butler-1.png /workspace/source/butler.png /workspace/source/logo.png] 
[36mINFO[0m[0022] COPY *.png .                                 
[36mINFO[0m[0022] Taking snapshot of files...                  
[36mINFO[0m[0022] Using files from context: [/workspace/source/xss.html] 
[36mINFO[0m[0022] COPY xss.html .                              
[36mINFO[0m[0022] Taking snapshot of files...                  
[36mINFO[0m[0022] Using files from context: [/workspace/source/flask_app.py] 
[36mINFO[0m[0022] COPY flask_app.py .                          
[36mINFO[0m[0022] Taking snapshot of files...                  
[36mINFO[0m[0022] ENV PORT 8080                                
[36mINFO[0m[0022] No files changed in this command, skipping snapshotting. 
[36mINFO[0m[0022] EXPOSE 8080                                  
[36mINFO[0m[0022] cmd: EXPOSE                                  
[36mINFO[0m[0022] Adding exposed port: 8080/tcp                
[36mINFO[0m[0022] No files changed in this command, skipping snapshotting. 
[36mINFO[0m[0022] ENTRYPOINT ["python"]                        
[36mINFO[0m[0022] No files changed in this command, skipping snapshotting. 
[36mINFO[0m[0022] CMD ["/usr/src/app/flask_app.py"]            
[36mINFO[0m[0022] No files changed in this command, skipping snapshotting. 
[33mWARN[0m[0022] error uploading layer to cache: failed to push to destination 251647719696.dkr.ecr.us-east-2.amazonaws.com/todo/cache:d59b97174bce710b82c453d1c61c69fabd876428b1d9b57a93fe29aaa79d6fc7: NAME_UNKNOWN: The repository with name 'todo/cache' does not exist in the registry with id '251647719696' 
2020/03/02 00:59:27 existing blob: sha256:e96bc319bce0351d1157092352bc5f85f8800c745388e60e86d06dec99285b45
2020/03/02 00:59:27 existing blob: sha256:2d21c767035c4593de8bf7ad9781aa83ba110871d1a50871192f4e3480e6f11d
2020/03/02 00:59:27 existing blob: sha256:ece825d3308bbf98f708d95475ccd880497a1e2979ff4ef2534d49049a18488f
2020/03/02 00:59:27 existing blob: sha256:06854774e2f35e4763103a446112c67322913a6177bea69eb49663e0166e6d6d
2020/03/02 00:59:27 existing blob: sha256:f0db43b9b8da254cebc77bf871006df01219e195b9853616b9f708f124a00f3a
2020/03/02 00:59:27 existing blob: sha256:e10b68fb77e6e91453cd4c1b02e2d77aa23a857cd8eb250617129d074478e1a5
2020/03/02 00:59:27 existing blob: sha256:e2c0fb34dff3a1d32346b92e53fb88a14d1987b402a2348cb379c039687fabe2
2020/03/02 00:59:27 existing blob: sha256:1c7fe136a31e13a1c879245672184ced3b9fc590989ba42a522a57b071a9c1aa
2020/03/02 00:59:27 existing blob: sha256:490280dbcfb772eb5731f059e38fcfacaeb75b4d005af7c249fd51926db2bd62
2020/03/02 00:59:27 pushed blob: sha256:baeef6c035ac683576b1f49913f2e55840137b3ec4c30186905c0a34e263c1a9
2020/03/02 00:59:27 pushed blob: sha256:6c2439e975f2fb31de4bd51273ffebd5a266f04673e05193dc591d261aec9314
2020/03/02 00:59:27 pushed blob: sha256:ea3947a922823fedd192916422939cd3bc5981fe287d48a3a9f882f23e996d39
2020/03/02 00:59:27 pushed blob: sha256:0526c4ee83eee1709e52642af77d0d5b1678c614558a7214fdb5c5fdeb83e812
2020/03/02 00:59:27 pushed blob: sha256:fcf2c48cc49304887199c05957fc4162ddf34bbb2cfdc465df83d1aaa3347646
2020/03/02 00:59:27 pushed blob: sha256:a71f3a7deb0572c4e849512a4c5c5ab49d642a6ccb27dc3c4dba2b47809afaa6
2020/03/02 00:59:28 pushed blob: sha256:8b212fb560755ad710365c319183c23db3bde97e1a6359bf2148473eb75c77ba
2020/03/02 00:59:28 pushed blob: sha256:9018a39387c8fb1b05fefb4dfe55783949212eab2a73cdd231d59a2737c9835c
2020/03/02 00:59:28 251647719696.dkr.ecr.us-east-2.amazonaws.com/*******/flask-**-sample:0.0.0-SNAPSHOT-PR-22-5: digest: sha256:0d44c8e74cfe57c504b2e8d9b3d6b277c8be513fe94c69a769dac1159a17a6c1 size: 2868

Showing logs for build [32mtrietlu-flask-jx-sample-pr-22-s-6wrsd-5[0m stage [32mfrom-build-pack[0m and container [32mstep-postbuild-post-build[0m
no CVE provider running in the current ** namespace so skip adding image to be analysed

Showing logs for build [32mtrietlu-flask-jx-sample-pr-22-s-6wrsd-5[0m stage [32mfrom-build-pack[0m and container [32mstep-postbuild-container-image-scan[0m
WARNING: Running pip install with root privileges is generally not a good idea. Try `pip3 install --user` instead.
Collecting boto3
  Downloading https://files.pythonhosted.org/packages/05/6d/3c2481b929537e5571ef20554c413d64cb4354dcd9f3c711f538ea5db931/boto3-1.12.11-py2.py3-none-any.whl (128kB)
Collecting jmespath<1.0.0,>=0.7.1 (from boto3)
  Downloading https://files.pythonhosted.org/packages/a3/43/1e939e1fcd87b827fe192d0c9fc25b48c5b3368902bfb913de7754b0dc03/jmespath-0.9.5-py2.py3-none-any.whl
Collecting botocore<1.16.0,>=1.15.11 (from boto3)
  Downloading https://files.pythonhosted.org/packages/e5/e8/c2cb7845cab6d7694fc82f9cff8916f89b1233aa4d881c6cbeaac42b82b9/botocore-1.15.11-py2.py3-none-any.whl (5.9MB)
Collecting s3transfer<0.4.0,>=0.3.0 (from boto3)
  Downloading https://files.pythonhosted.org/packages/69/79/e6afb3d8b0b4e96cefbdc690f741d7dd24547ff1f94240c997a26fa908d3/s3transfer-0.3.3-py2.py3-none-any.whl (69kB)
Collecting docutils<0.16,>=0.10 (from botocore<1.16.0,>=1.15.11->boto3)
  Downloading https://files.pythonhosted.org/packages/22/cd/a6aa959dca619918ccb55023b4cb151949c64d4d5d55b3f4ffd7eee0c6e8/docutils-0.15.2-py3-none-any.whl (547kB)
Collecting urllib3<1.26,>=1.20; python_version != "3.4" (from botocore<1.16.0,>=1.15.11->boto3)
  Downloading https://files.pythonhosted.org/packages/e8/74/6e4f91745020f967d09332bb2b8b9b10090957334692eb88ea4afe91b77f/urllib3-1.25.8-py2.py3-none-any.whl (125kB)
Collecting python-dateutil<3.0.0,>=2.1 (from botocore<1.16.0,>=1.15.11->boto3)
  Downloading https://files.pythonhosted.org/packages/d4/70/d60450c3dd48ef87586924207ae8907090de0b306af2bce5d134d78615cb/python_dateutil-2.8.1-py2.py3-none-any.whl (227kB)
Collecting six>=1.5 (from python-dateutil<3.0.0,>=2.1->botocore<1.16.0,>=1.15.11->boto3)
  Downloading https://files.pythonhosted.org/packages/65/eb/1f97cb97bfc2390a276969c6fae16075da282f5058082d4cb10c6c5c1dba/six-1.14.0-py2.py3-none-any.whl
Installing collected packages: jmespath, docutils, urllib3, six, python-dateutil, botocore, s3transfer, boto3
Successfully installed boto3-1.12.11 botocore-1.15.11 docutils-0.15.2 jmespath-0.9.5 python-dateutil-2.8.1 s3transfer-0.3.3 six-1.14.0 urllib3-1.25.8
Doing CVE scan of *******/flask-**-sample:0.0.0-SNAPSHOT-PR-22-5 in registry 251647719696.dkr.ecr.us-east-2.amazonaws.com
CVE findings permitted by policy

Showing logs for build [32mtrietlu-flask-jx-sample-pr-22-s-6wrsd-5[0m stage [32mfrom-build-pack[0m and container [32mstep-promote-make-preview[0m
sed -i -e "s/version:.*/version: 0.0.0-SNAPSHOT-PR-22-5/" Chart.yaml
sed -i -e "s/version:.*/version: 0.0.0-SNAPSHOT-PR-22-5/" ../*/Chart.yaml
sed -i -e "s|repository:.*|repository: 251647719696.dkr.ecr.us-east-2.amazonaws.com\/*******\/flask-**-sample|" values.yaml
sed -i -e "s/tag:.*/tag: 0.0.0-SNAPSHOT-PR-22-5/" values.yaml
echo "  version: 0.0.0-SNAPSHOT-PR-22-5" >> requirements.yaml
** step helm build
WARNING: No $CHART_REPOSITORY defined so using the default value of: http://jenkins-x-chartmuseum:8080
Adding missing Helm repo: storage.googleapis.com https://storage.googleapis.com/chartmuseum.jenkins-x.io
Successfully added Helm repository storage.googleapis.com.
Adding missing Helm repo: jenkins-x-chartmuseum http://jenkins-x-chartmuseum:8080
Successfully added Helm repository jenkins-x-chartmuseum.
WARNING: No $CHART_REPOSITORY defined so using the default value of: http://jenkins-x-chartmuseum:8080
Adding missing Helm repo: chartmuseum.jenkins-x.io http://chartmuseum.jenkins-x.io
Successfully added Helm repository chartmuseum.jenkins-x.io.

Showing logs for build [32mtrietlu-flask-jx-sample-pr-22-s-6wrsd-5[0m stage [32mfrom-build-pack[0m and container [32mstep-promote-jx-preview[0m
Creating a preview
Found commit author match for: ******* with email address: triet05@gmail.com
expose:
  Annotations:
    helm.sh/hook: post-install,post-upgrade
    helm.sh/hook-delete-policy: hook-succeeded
  config:
    domain: jenkinsx.*******.people.a2z.com
    exposer: Ingress
    http: "true"
preview:
  image:
    repository: 251647719696.dkr.ecr.us-east-2.amazonaws.com/*******/flask-**-sample
    tag: 0.0.0-SNAPSHOT-PR-22-5
Cloning the Jenkins X versions repo https://github.com/jenkins-x/jenkins-x-versions.git with ref refs/heads/master to /builder/home/.**/jenkins-x-versions

Updating PipelineActivities *******-flask-**-sample-pr-22-5 which has status Running
Preview application is now available at: http://flask-**-sample.**-*******-flask-**-sample-pr-22.jenkinsx.*******.people.a2z.com
